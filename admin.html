<!DOCTYPE HTML>
<html>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<body>
<h1>Welcome to Phoenix Friend School Admissions</h1>
<h2>Administration Site. Please choose an option below.</h2>
<br>
<button type='button' id='list_all_button' onclick='list_all_applicants()' >List all Applicants</button>
<form action='./cgi-bin/search_applicant.pl' method='post'>
	<label for='search_last_name'>Search for student (last name):</label>
	<input type='text' id='search_last_name' name='search_last_name'></input>
	<input type='submit' value='Submit'>
</form>

<div id='edit_div' style='display: none;'>
	<form action='./cgi-bin/edit_applicant.pl' method='post'>
		<input type='text' id='posting_id' name='posting_id' style='display: none;'>
		<label for='first_name'>First Name:</label>
		<input type='text' id='first_name' name='first_name'>
	<br>
		<label for='last_name'>Last Name:</label>
		<input type='text' id='last_name' name='last_name'>
	<br><br>
		<input type='submit' value='Save'>
	</form>
</div>

<div id='received'></div>

<script>

function list_all_applicants(){
    var xmlHttpReq = false;
    xmlHttpReq = new XMLHttpRequest();
    xmlHttpReq.open('POST', '/cgi-bin/list_all_applicants.pl', true);
    xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xmlHttpReq.onreadystatechange = function() {
            if (xmlHttpReq.readyState == 4) {
				console.log("response:");
				console.log(xmlHttpReq.responseText);
				response = xmlHttpReq.responseText;
				document.getElementById("received").innerHTML = response;
            }
        }
    xmlHttpReq.send();
}

function edit_applicant(id, first_name, last_name){
	document.getElementById('edit_div').style.display = 'inline';
	document.getElementById('posting_id').value = id;
	//document.getElementById('first_name').value = first_name;
	//document.getElementById('last_name').value = last_name;
	console.log('edit: ' + id);
}


</script>

</body>
</html>


</script>

</body>
</html>
